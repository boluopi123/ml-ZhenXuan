import{_ as x,x as H,f as L,o as S,i as N,e as u,y as B,z,A as W,r as M,B as P,I as R,N as $,D,E as U,H as E,a as c,w as v,u as i,J as g,K as F,L as q,t as w,b as A,p as J,d as K}from"./index.13656ce4.js";import{l as j,s as b,r as G}from"./index.aa92eb86.js";const O=""+new URL("logo.1e8c34ec.png",import.meta.url).href;const Q={class:"s-canvas"},X=["width","height"],Y={__name:"Identify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:35},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:100},lineColorMax:{type:Number,default:200},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:120},contentHeight:{type:Number,default:40}},setup(p){const t=p,n=(e,o)=>Math.floor(Math.random()*(o-e)+e),r=(e,o)=>{let a=n(e,o),s=n(e,o),l=n(e,o);return"rgb("+a+","+s+","+l+")"},f=e=>{for(let o=0;o<3;o++)e.strokeStyle=r(t.lineColorMin,t.lineColorMax),e.beginPath(),e.moveTo(n(0,t.contentWidth),n(0,t.contentHeight)),e.lineTo(n(0,t.contentWidth),n(0,t.contentHeight)),e.stroke()},m=(e,o,a)=>{e.fillStyle=r(t.colorMin,t.colorMax),e.font=n(t.fontSizeMin,t.fontSizeMax)+"px SimHei";let s=(a+1)*(t.contentWidth/(t.identifyCode.length+1)),l=n(t.fontSizeMax,t.contentHeight-5);var y=n(-10,10);e.translate(s,l),e.rotate(y*Math.PI/100),e.fillText(o,0,0),e.rotate(-y*Math.PI/100),e.translate(-s,-l)},h=e=>{for(let o=0;o<30;o++)e.fillStyle=r(0,255),e.beginPath(),e.arc(n(0,t.contentWidth),n(0,t.contentHeight),1,0,2*Math.PI),e.fill()},_=()=>{let o=document.getElementById("s-canvas").getContext("2d");o.textBaseline="bottom",o.fillStyle=r(t.backgroundColorMin,t.backgroundColorMax),o.fillRect(0,0,t.contentWidth,t.contentHeight);for(let a=0;a<t.identifyCode.length;a++)m(o,t.identifyCode[a],a);f(o),h(o)};return H(()=>t.identifyCode,(e,o)=>{_()}),L(()=>{_()}),(e,o)=>(S(),N("div",Q,[u("canvas",{id:"s-canvas",width:t.contentWidth,height:t.contentHeight},null,8,X)]))}},Z=x(Y,[["__scopeId","data-v-3ad97de0"]]);const k=p=>(J("data-v-f5e5c99a"),p=p(),K(),p),ee={class:"login"},te=k(()=>u("img",{src:O,width:"100",class:"logo",alt:""},null,-1)),oe={class:"login-form"},ne={style:{display:"flex",width:"100%","margin-top":"10px"}},ae=k(()=>u("div",{class:"identify"},"\u9A8C\u8BC1\u7801",-1)),le={style:{margin:"16px"}},se={__name:"Login",setup(p){B();let t=z(),n=W({username:"17001100999",password:"123456",isTitle:!1}),r=M(""),f=M("1234"),m=()=>{let s=(Math.random()*1e4).toFixed(0).toString();f.value=s},h=()=>{r.value===f.value?n.isTitle?j(n.username,n.password).then(s=>{console.log(s),s.resultCode==200&&(localStorage.setItem("ml-token",s.data),t.replace("/home"),b({type:"success",message:"\u767B\u5F55\u6210\u529F"}))}):G(n.username,n.password).then(s=>{s.resultCode==200&&(b({type:"success",message:"\u6CE8\u518C\u6210\u529F"}),n.isTitle=!0)}):(b({type:"danger",message:"\u9A8C\u8BC1\u7801\u8F93\u5165\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165"}),m())},_=()=>{t.back()},{username:e,password:o,isTitle:a}=P(n);return(s,l)=>{const y=R,I=$,C=D,V=U,T=E;return S(),N("div",ee,[u("header",null,[c(I,{title:i(a)?"\u767B\u5F55":"\u6CE8\u518C","left-arrow":"",onClickLeft:i(_)},{right:v(()=>[c(y,{name:"ellipsis",size:"18"})]),_:1},8,["title","onClickLeft"])]),te,u("div",oe,[c(T,{onSubmit:i(h)},{default:v(()=>[c(C,{modelValue:i(e),"onUpdate:modelValue":l[0]||(l[0]=d=>g(e)?e.value=d:e=d),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u624B\u673A\u53F7"}]},null,8,["modelValue"]),c(C,{modelValue:i(o),"onUpdate:modelValue":l[1]||(l[1]=d=>g(o)?o.value=d:o=d),type:"password",name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"]),u("div",ne,[ae,F(u("input",{type:"text",placeholder:"\u9A8C\u8BC1\u7801","onUpdate:modelValue":l[2]||(l[2]=d=>g(r)?r.value=d:r=d)},null,512),[[q,i(r)]]),u("div",{class:"code",onClick:l[3]||(l[3]=(...d)=>i(m)&&i(m)(...d)),style:{width:"112px"}},[c(Z,{identifyCode:i(f)},null,8,["identifyCode"])])]),u("div",le,[u("p",{class:"link-register",onClick:l[4]||(l[4]=d=>g(a)?a.value=!i(a):a=!i(a))},w(i(a)?"\u7ACB\u5373\u6CE8\u518C":"\u5DF2\u6709\u8D26\u53F7\uFF0C\u7ACB\u5373\u767B\u5F55"),1),c(V,{round:"",block:"",type:"primary","native-type":"submit"},{default:v(()=>[A(w(i(a)?"\u767B\u5F55":"\u6CE8\u518C"),1)]),_:1})])]),_:1},8,["onSubmit"])])])}}},re=x(se,[["__scopeId","data-v-f5e5c99a"]]);export{re as default};
